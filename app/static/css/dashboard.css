/* THEME TOKENS â€” tie all colors to theme-scoped vars */
:root{ --radius: 14px; }
/* Dark */
:root{
  --bg1:#0b0f19;           /* deep navy-black */
  --bg2:#131a29;
  --surface:rgba(255,255,255,.05);
  --glass: rgba(255,255,255,.06);
  --border:rgba(255,255,255,.10);
  --brand:#6C63FF;         /* accent purple */
  --brand-soft: rgba(108,99,255,.12);
  --radius:14px;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
}

/* Light */
:root[data-bs-theme="light"]{
  --bg1:#f6f7fb; --bg2:#eef1f8;
  --surface:#ffffffcc;
  --border:#e7eaf3;
  --text:#0c1020;
  --muted:#5c6473;
  --accent:#6b4dff; --accent2:#0fb6c9;
  --card:#ffffff;
}

html, body { height: 100%; background: radial-gradient(1200px 800px at 10% 10%, rgba(108,99,255,.12), transparent 60%), radial-gradient(900px 600px at 90% 30%, rgba(163,210,202,.12), transparent 60%), linear-gradient(180deg, var(--bg1), var(--bg2)); }
* { box-sizing: border-box; }

body{
  font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text);    
  background:
    radial-gradient(1200px 800px at 10% -10%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 60%),
    radial-gradient(900px 600px at 90% -10%, color-mix(in oklab, var(--accent2) 18%, transparent), transparent 60%),
    linear-gradient(120deg, var(--bg1), var(--bg2));
}

/* Glass + UI elements */
.glass{background:var(--surface); border:1px solid var(--border); backdrop-filter: blur(10px); border-radius:var(--radius);}
.gradient-text{background: linear-gradient(90deg,var(--accent),#b06cff,var(--accent2)); -webkit-background-clip:text; background-clip:text; color:transparent;}
.hero-line{height:3px; border-radius:999px; background: linear-gradient(90deg,transparent, var(--accent), transparent); filter: drop-shadow(0 0 8px color-mix(in oklab, var(--accent) 65%, transparent)); animation: slide 3s linear infinite;}
@keyframes slide{0%{background-position:-200px 0;}100%{background-position:200px 0;}}

.metric{position:relative; overflow:hidden;}
.metric .pulse{position:absolute; inset:auto -30% -40% auto; width:200px; height:200px; background:radial-gradient(closest-side, color-mix(in oklab, var(--accent) 18%, transparent), transparent 70%); filter:blur(20px); animation: float 6s ease-in-out infinite;}
@keyframes float{50%{transform:translateY(-6px);} 100%{transform:translateY(0);}}

/* --- Topbar --- */
.topbar{
  position: sticky; top:0; z-index:1000;
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(10px);
}
.topbar .topbar-inner{
  min-height:56px;
  display:flex; align-items:center; justify-content:space-between;
}
.glass{
  background: var(--glass);
  box-shadow: var(--shadow);
}
/* --- Layout --- */
.layout { min-height: calc(100vh - 56px); }
/* --- Sidebar --- */
.sidebar{
  width: 260px;
  border-right: 1px solid var(--border);
  backdrop-filter: blur(10px);
  position: sticky; top:56px; align-self:flex-start; height: calc(100vh - 56px);
  overflow-y: auto;
}
.sidebar::-webkit-scrollbar { width: 8px; }
.sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 8px; }

.nav-title{
  letter-spacing: .08em;
}
#sidebarNav .nav-link{
  color: #d6d9e0;
  border-radius: 10px;
  padding: .55rem .75rem;
  transition: all .15s ease;
  position: relative;
}
#sidebarNav .nav-link:hover{
  background: var(--brand-soft);
  color: #fff;
}
#sidebarNav .nav-link.active{
  background: linear-gradient(135deg, rgba(108,99,255,.25), rgba(108,99,255,.05));
  color: #fff;
  border: 1px solid rgba(108,99,255,.25);
  box-shadow: 0 6px 18px rgba(108,99,255,.15);
}
#sidebarNav .nav-link i{
  font-size: 1.05rem;
}

/* --- Main --- */
main{
  width: 100%;
}

/* --- Buttons --- */
.btn-outline-light{
  border-color: rgba(255,255,255,.25);
}

/* --- Mobile sidebar behavior --- */
@media (max-width: 767.98px){
  .sidebar{
    position: fixed; left: 0; top: 56px; height: calc(100vh - 56px);
    transform: translateX(-100%);
    transition: transform .2s ease;
  }
  .sidebar.open{
    transform: translateX(0);
  }
  main{ padding-top: 1rem; }
}
.sidebar .nav-link{color:var(--muted);}
.sidebar .nav-link.active, .sidebar .nav-link:hover{color:var(--text); background:var(--surface);}

.table>thead th{color:var(--muted); font-weight:600; border-bottom-color:var(--border);}
.table tbody tr:hover{background:color-mix(in oklab, var(--surface) 60%, transparent);}

.chip{background:var(--surface); border:1px solid var(--border); padding:.35rem .6rem; border-radius:999px; font-size:.75rem;}
.card-img-top{border-top-left-radius:var(--radius); border-top-right-radius:var(--radius);}

/* ---------- Messenger style chat thread (grouped with day separators) ---------- */
.chat-thread {
  max-width: 100%;
  margin: 0 auto;
  height: calc(100vh - 220px);
  padding: 12px 8px;
  overflow-y: auto;
  scroll-behavior: smooth;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* Day separator */
.day-sep{
  display:flex; align-items:center; justify-content:center;
  gap:10px; color:var(--muted); font-size:.8rem; user-select:none;
}
.day-sep::before, .day-sep::after{
  content:""; height:1px; flex:1;
  background: color-mix(in oklab, var(--border) 80%, transparent);
}
.day-sep > span{
  padding:2px 10px; border-radius:999px;
  background: color-mix(in oklab, var(--surface) 70%, transparent);
  border:1px solid var(--border);
}

/* Chat row */
.chat-row{
  display:flex;
  align-items:flex-start;
  gap:8px;
  animation: fadeIn .18s ease;
}
.chat-row.in { justify-content:flex-start; }
.chat-row.out { justify-content:flex-end; flex-direction:row-reverse; }

/* Avatars */
.avatar{ width:30px; height:30px; border-radius:50%; display:grid; place-items:center; font-size:.75rem; font-weight:600; color:#fff; user-select:none; box-shadow:0 2px 6px rgba(0,0,0,.18); }
.avatar-us{ background:#0D8ABC; }
.avatar-bot{ background:#7c5cff; }
.avatar-spacer{ width:30px; height:30px; }


/* Group wrapper */
.bubble-group{ 
  display:flex; 
  flex-direction:column; 
  gap:4px; 
  max-width:70%; 
}

/* >>> FORCE bot messages to the right */
.chat-row.out .bubble-group{ 
  align-items:flex-end; 
  margin-left:auto;            /* push group fully right */
}
.chat-row.out .bubble{ 
  align-self:flex-end; 
  text-align:left;             /* keep text normal */
}

/* Bubbles */
.bubble{
  padding:8px 12px;
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  font-size:.95rem;
  line-height:1.35;
  overflow-wrap:anywhere;
  border:1px solid var(--border);
  box-shadow:0 1px 4px rgba(0,0,0,.12);
}
.chat-row.in  .bubble{ background:#2c3345; }
.chat-row.out .bubble{ background:#3a3f56; }

/* Meta (only at end of group) */
.meta{ font-size:.72rem; opacity:.7; margin-top:2px; }

/* Links & inline images */
.bubble .text a{ color:#7db0ff; text-decoration:underline; text-underline-offset:2px; }
.bubble img{ margin-top:6px; max-width:260px; border-radius:8px; }

/* Animations */
@keyframes fadeIn{ from{opacity:0; transform:translateY(6px);} to{opacity:1; transform:none;} }

/* ---------- Chat container box ---------- */
.chat-box{
  max-width: 90%;
  margin: 0 auto;
  padding: 14px;
  border-radius: calc(var(--radius) + 4px);
  border: 1px solid var(--border);
  background:
    radial-gradient(800px 500px at 85% 0%, color-mix(in oklab, var(--accent2) 10%, transparent), transparent 60%),
    radial-gradient(900px 600px at 0% 100%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 60%),
    var(--surface);
  box-shadow:
    0 10px 30px rgba(0,0,0,.18),
    inset 0 1px 0 rgba(255,255,255,.04);
}

/* make the thread sit nicely inside the box */
.chat-box .chat-thread{
  height: calc(100vh - 260px);   /* a bit shorter because of the outer padding */
  padding: 8px 6px;
  border-radius: calc(var(--radius) - 4px);
  background: transparent;       /* we keep the glass on the wrapper */
}

/* subtle top+bottom fade so scroll feels natural */
.chat-box .chat-thread::before,
.chat-box .chat-thread::after{
  content:""; position: sticky; left:0; right:0; z-index:1; pointer-events:none;
  height: 22px; display:block;
}
.chat-box .chat-thread::before{
  top: -8px;
  background: linear-gradient(to bottom, rgba(0,0,0,.22), transparent);
  border-top-left-radius: inherit;
  border-top-right-radius: inherit;
}
.chat-box .chat-thread::after{
  bottom: -8px;
  background: linear-gradient(to top, rgba(0,0,0,.22), transparent);
  border-bottom-left-radius: inherit;
  border-bottom-right-radius: inherit;
}

/* ---------- Pretty scrollbar (Chrome/Edge/Safari) ---------- */
.chat-thread::-webkit-scrollbar{ width: 10px; }
.chat-thread::-webkit-scrollbar-track{
  background: transparent;
}
.chat-thread::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--accent) 35%, transparent),
    color-mix(in oklab, var(--accent2) 35%, transparent)
  );
  border: 3px solid transparent;           /* creates the gap */
  border-radius: 999px;
  background-clip: padding-box;
}
.chat-thread::-webkit-scrollbar-thumb:hover{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--accent) 55%, transparent),
    color-mix(in oklab, var(--accent2) 55%, transparent)
  );
}

/* ---------- Pretty scrollbar (Firefox) ---------- */
.chat-thread{
  scrollbar-width: thin;                         /* thin rail */
  scrollbar-color: color-mix(in oklab, var(--accent2) 45%, transparent) transparent;
}

/* optional: faint divider line between far-apart groups */
.chat-thread .meta + .chat-row{
  margin-top: 10px;
}