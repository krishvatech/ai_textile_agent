/* THEME TOKENS â€” tie all colors to theme-scoped vars */
:root{ --radius: 14px; }
/* Dark */
:root{
  --bg1:#0b0f19;           /* deep navy-black */
  --bg2:#131a29;
  --surface:rgba(255,255,255,.05);
  --glass: rgba(255,255,255,.06);
  --border:rgba(255,255,255,.10);
  --brand:#6C63FF;         /* accent purple */
  --brand-soft: rgba(108,99,255,.12);
  --radius:14px;
  --shadow: 0 10px 30px rgba(0,0,0,.25);

  /* light text defaults in dark theme */
  --text:#e9ecf5;
  --muted:#a3a8b6;
  --accent:#6b4dff; 
  --accent2:#0fb6c9;
  --card:#1a2133;
}

/* Light */
:root[data-bs-theme="light"]{
  --bg1:#f6f7fb; --bg2:#eef1f8;
  --surface:#ffffffcc;
  --border:#e7eaf3;
  --text:#0c1020;
  --muted:#5c6473;
  --accent:#6b4dff; --accent2:#0fb6c9;
  --card:#ffffff;
}

html, body { height: 100%; background: radial-gradient(1200px 800px at 10% 10%, rgba(108,99,255,.12), transparent 60%), radial-gradient(900px 600px at 90% 30%, rgba(163,210,202,.12), transparent 60%), linear-gradient(180deg, var(--bg1), var(--bg2)); }
* { box-sizing: border-box; }

body{
  font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text);    
  background:
    radial-gradient(1200px 800px at 10% -10%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 60%),
    radial-gradient(900px 600px at 90% -10%, color-mix(in oklab, var(--accent2) 18%, transparent), transparent 60%),
    linear-gradient(120deg, var(--bg1), var(--bg2));
}

/* Glass + UI elements */
.glass{background:var(--surface); border:1px solid var(--border); backdrop-filter: blur(10px); border-radius:var(--radius);}
.gradient-text{background: linear-gradient(90deg,var(--accent),#b06cff,var(--accent2)); -webkit-background-clip:text; background-clip:text; color:transparent;}
.hero-line{height:3px; border-radius:999px; background: linear-gradient(90deg,transparent, var(--accent), transparent); filter: drop-shadow(0 0 8px color-mix(in oklab, var(--accent) 65%, transparent)); animation: slide 3s linear infinite;}
@keyframes slide{0%{background-position:-200px 0;}100%{background-position:200px 0;}}

.metric{position:relative; overflow:hidden;}
.metric .pulse{position:absolute; inset:auto -30% -40% auto; width:200px; height:200px; background:radial-gradient(closest-side, color-mix(in oklab, var(--accent) 18%, transparent), transparent 70%); filter:blur(20px); animation: float 6s ease-in-out infinite;}
@keyframes float{50%{transform:translateY(-6px);} 100%{transform:translateY(0);}}

/* --- Topbar --- */
.topbar{
  position: sticky; top:0; z-index:1000;
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(10px);
}
.topbar .topbar-inner{
  min-height:56px;
  display:flex; align-items:center; justify-content:space-between;
}
.glass{
  background: var(--glass);
  box-shadow: var(--shadow);
}
/* --- Layout --- */
.layout { min-height: calc(100vh - 56px); }
/* --- Sidebar --- */
.sidebar{
  width: 260px;
  border-right: 1px solid var(--border);
  backdrop-filter: blur(10px);
  position: sticky; top:56px; align-self:flex-start; height: calc(100vh - 56px);
  overflow-y: auto;
}
.sidebar::-webkit-scrollbar { width: 8px; }
.sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 8px; }

.nav-title{ letter-spacing: .08em; }
#sidebarNav .nav-link{
  color: #d6d9e0;
  border-radius: 10px;
  padding: .55rem .75rem;
  transition: all .15s ease;
  position: relative;
}
#sidebarNav .nav-link:hover{ background: var(--brand-soft); color: #fff; }
#sidebarNav .nav-link.active{
  background: linear-gradient(135deg, rgba(108,99,255,.25), rgba(108,99,255,.05));
  color: #fff;
  border: 1px solid rgba(108,99,255,.25);
  box-shadow: 0 6px 18px rgba(108,99,255,.15);
}
#sidebarNav .nav-link i{ font-size: 1.05rem; }

/* --- Main --- */
main{ width: 100%; }

/* --- Buttons --- */
.btn-outline-light{ border-color: rgba(255,255,255,.25); }

/* --- Mobile sidebar behavior --- */
@media (max-width: 767.98px){
  .sidebar{
    position: fixed; left: 0; top: 56px; height: calc(100vh - 56px);
    transform: translateX(-100%);
    transition: transform .2s ease;
  }
  .sidebar.open{ transform: translateX(0); }
  main{ padding-top: 1rem; }
}
.sidebar .nav-link{color:var(--muted);}
.sidebar .nav-link.active, .sidebar .nav-link:hover{color:var(--text); background:var(--surface);}

.table>thead th{color:var(--muted); font-weight:600; border-bottom-color:var(--border);}
.table tbody tr:hover{background:color-mix(in oklab, var(--surface) 60%, transparent);}

.chip{background:var(--surface); border:1px solid var(--border); padding:.35rem .6rem; border-radius:999px; font-size:.75rem;}
.card-img-top{border-top-left-radius:var(--radius); border-top-right-radius:var(--radius);}

/* Uniform chart card height */
.chart-card{ height: 360px; }
.chart-card canvas{ width: 100% !important; height: 100% !important; }

/* ---------- Messenger style chat thread ---------- */
.chat-thread {
  max-width: 100%;
  margin: 0 auto;
  height: calc(100vh - 220px);
  padding: 12px 8px;
  overflow-y: auto;
  scroll-behavior: smooth;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* Day separator */
.day-sep{
  display:flex; align-items:center; justify-content:center;
  gap:10px; color:var(--muted); font-size:.8rem; user-select:none;
}
.day-sep::before, .day-sep::after{
  content:""; height:1px; flex:1;
  background: color-mix(in oklab, var(--border) 80%, transparent);
}
.day-sep > span{
  padding:2px 10px; border-radius:999px;
  background: color-mix(in oklab, var(--surface) 70%, transparent);
  border:1px solid var(--border);
}

/* Chat row */
.chat-row{
  display:flex;
  align-items:flex-start;
  gap:8px;
  animation: fadeIn .18s ease;
}
.chat-row.in { justify-content:flex-start; }
.chat-row.out { justify-content:flex-end; flex-direction:row-reverse; }

/* Avatars */
.avatar{ width:30px; height:30px; border-radius:50%; display:grid; place-items:center; font-size:.75rem; font-weight:600; color:#fff; user-select:none; box-shadow:0 2px 6px rgba(0,0,0,.18); }
.avatar-us{ background:#0D8ABC; }
.avatar-bot{ background:#7c5cff; }
.avatar-spacer{ width:30px; height:30px; }

/* Group wrapper (limits width of a run of bubbles) */
.bubble-group{ 
  display:flex; 
  flex-direction:column; 
  gap:4px; 
  max-width:70%; 
}

/* force bot groups to the right */
.chat-row.out .bubble-group{ 
  align-items:flex-end; 
  margin-left:auto;
}
.chat-row.out .bubble{ 
  align-self:flex-end; 
  text-align:left;
}

/* ---------------- Bubbles ---------------- */
.bubble{
  padding:8px 12px;
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  font-size:.95rem;
  line-height:1.35;
  overflow-wrap:anywhere;
  border:1px solid var(--border);
  box-shadow:0 1px 4px rgba(0,0,0,.12);
  display:inline-block;         /* shrink to content width */
  max-width: 70ch;              /* safety cap for text-only */
}
.chat-row.in  .bubble{ background:#2c3345; }
.chat-row.out .bubble{ background:#3a3f56; }

/* Photo/message card variant (WhatsApp-like) */
.bubble.photo{
  padding:6px;
}

/* Group image + caption and clamp width to image width */
.bubble .bubble-inner{
  display:inline-flex;
  flex-direction:column;
  align-items:flex-start;
}
.bubble.photo .bubble-inner{
  max-width:260px;              /* change to 300px if you prefer larger tiles */
}

/* Image styling (overrides generic img rule) */
.bubble.photo .msg-img{
  display:block;
  width:100%;
  height:auto;
  border-radius:8px;
  margin:0 0 6px 0;
}

/* Caption: same width as image */
.bubble.photo .caption{
  max-width:100%;
  font-size:.92rem;
  line-height:1.35;
  word-wrap:break-word;
}
.bubble .caption{
  white-space: pre-line;  /* render \n as real line breaks */
}
/* Links */
.bubble .caption a,
.bubble .text a{
  color:#7db0ff; 
  text-decoration:underline; 
  text-underline-offset:2px;
}

/* Fallback for any inline image in bubbles (kept for older messages) */
.bubble img{ margin-top:6px; max-width:260px; border-radius:8px; }

/* Meta (only at end of group) */
.meta{ font-size:.72rem; opacity:.7; margin-top:2px; }

/* Animations */
@keyframes fadeIn{ from{opacity:0; transform:translateY(6px);} to{opacity:1; transform:none;} }

/* ---------- Chat container box ---------- */
.chat-box{
  max-width: 90%;
  margin: 0 auto;
  padding: 14px;
  border-radius: calc(var(--radius) + 4px);
  border: 1px solid var(--border);
  background:
    radial-gradient(800px 500px at 85% 0%, color-mix(in oklab, var(--accent2) 10%, transparent), transparent 60%),
    radial-gradient(900px 600px at 0% 100%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 60%),
    var(--surface);
  box-shadow:
    0 10px 30px rgba(0,0,0,.18),
    inset 0 1px 0 rgba(255,255,255,.04);
}

/* make the thread sit nicely inside the box */
.chat-box .chat-thread{
  height: calc(100vh - 260px);
  padding: 8px 6px;
  border-radius: calc(var(--radius) - 4px);
  background: transparent;
}

/* subtle top+bottom fade so scroll feels natural */
.chat-box .chat-thread::before,
.chat-box .chat-thread::after{
  content:""; position: sticky; left:0; right:0; z-index:1; pointer-events:none;
  height: 22px; display:block;
}
.chat-box .chat-thread::before{
  top: -8px;
  background: linear-gradient(to bottom, rgba(0,0,0,.22), transparent);
  border-top-left-radius: inherit;
  border-top-right-radius: inherit;
}
.chat-box .chat-thread::after{
  bottom: -8px;
  background: linear-gradient(to top, rgba(0,0,0,.22), transparent);
  border-bottom-left-radius: inherit;
  border-bottom-right-radius: inherit;
}

/* ---------- Pretty scrollbar (Chrome/Edge/Safari) ---------- */
.chat-thread::-webkit-scrollbar{ width: 10px; }
.chat-thread::-webkit-scrollbar-track{ background: transparent; }
.chat-thread::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--accent) 35%, transparent),
    color-mix(in oklab, var(--accent2) 35%, transparent)
  );
  border: 3px solid transparent;
  border-radius: 999px;
  background-clip: padding-box;
}
.chat-thread::-webkit-scrollbar-thumb:hover{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--accent) 55%, transparent),
    color-mix(in oklab, var(--accent2) 55%, transparent)
  );
}

/* ---------- Pretty scrollbar (Firefox) ---------- */
.chat-thread{
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklab, var(--accent2) 45%, transparent) transparent;
}

/* optional: faint divider line between far-apart groups */
.chat-thread .meta + .chat-row{ margin-top: 10px; }

/* ---------- Fancy product table ---------- */
.table-products { border-collapse: separate; border-spacing: 0 10px; }
.table-products thead th {
  background: var(--glass);
  color: var(--accent);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .05em;
  border: none;
  padding: 12px;
  font-size: .85rem;
}
.table-products tbody tr {
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: 0 3px 10px rgba(0,0,0,.15);
  transition: transform .15s ease, box-shadow .15s ease;
}
.table-products tbody tr:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(0,0,0,.25);
}
.table-products td { padding: 14px 16px; border: none; vertical-align: middle; font-size: .92rem; }
.table-products tbody tr td:first-child { border-top-left-radius: var(--radius); border-bottom-left-radius: var(--radius); }
.table-products tbody tr td:last-child { border-top-right-radius: var(--radius); border-bottom-right-radius: var(--radius); }

/* ---------- People table ---------- */
.table-people{ border-collapse: separate; border-spacing: 0 10px; width:100%; }
.table-people thead th{
  background: var(--glass);
  color: var(--accent);
  font-weight: 600; letter-spacing:.05em; text-transform: uppercase;
  border:0; padding:12px; font-size:.82rem;
}
.table-people tbody tr{
  background: var(--surface); border-radius: var(--radius);
  box-shadow: 0 3px 10px rgba(0,0,0,.15);
  transition: transform .15s ease, box-shadow .15s ease;
}
.table-people tbody tr:hover{ transform: translateY(-3px); box-shadow: 0 6px 16px rgba(0,0,0,.25); }
.table-people td{ border:0; padding:14px 16px; vertical-align: middle; font-size:.95rem; }
.table-people tbody tr td:first-child{ border-top-left-radius: var(--radius); border-bottom-left-radius: var(--radius); }
.table-people tbody tr td:last-child { border-top-right-radius: var(--radius); border-bottom-right-radius: var(--radius); }

/* Avatar + name cell */
.person{ display:flex; align-items:center; gap:12px; }
.person .avatar{
  width:36px; height:36px; border-radius:50%; display:grid; place-items:center;
  color:#fff; font-weight:700; font-size:.9rem;
  background: radial-gradient(120% 120% at 20% 20%, #7c5cff, #3a3f56);
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
}

/* chips + action buttons */
.btn-ghost{
  background: rgba(255,255,255,.06);
  border:1px solid var(--border);
  padding:.35rem .6rem; font-size:.8rem; border-radius:999px;
}
.btn-ghost:hover{ background: var(--brand-soft); border-color: color-mix(in oklab, var(--accent) 40%, var(--border)); }

/* tiny helper */
.muted{ color: var(--muted); font-size:.85rem; }
.copyable{ cursor:pointer; border-bottom:1px dashed rgba(255,255,255,.25); }

/* clickable reply preview */
.reply-preview{
  display:block;
  border-left: 3px solid var(--brand);
  padding: 4px 6px;
  margin-bottom: 6px;
  background: rgba(255,255,255,.05);
  border-radius: 6px;
  font-size: .8rem;
  max-width: 240px;
  text-decoration: none;
}
.reply-preview:hover{ background: rgba(255,255,255,.08); }

/* temporary highlight on the target message */
.chat-row.ping{
  animation: pingGlow 1.6s ease-out;
}
@keyframes pingGlow{
  0%   { box-shadow: 0 0 0 0 rgba(108,99,255,.55); }
  35%  { box-shadow: 0 0 0 8px rgba(108,99,255,.28); }
  70%  { box-shadow: 0 0 0 0 rgba(108,99,255,.18); }
  100% { box-shadow: none; }
}
.reply-preview .rp-author{
  font-weight: 600;
  margin-bottom: 2px;
  color: var(--accent);
}
.reply-preview .rp-text{
  color: var(--muted);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.reply-preview .rp-thumb{
  max-height: 40px;
  border-radius: 4px;
  margin-top: 4px;
}
/* ===== Segmented category tabs ===== */
.category-tabs {
  display: inline-flex;
  gap: 8px;
  padding: 6px;
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.04));
  border: 1px solid var(--line);
  box-shadow: 0 8px 20px rgba(0,0,0,.25);
}
.category-tabs .seg {
  --pad-x: 14px;
  --pad-y: 8px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: var(--pad-y) var(--pad-x);
  color: var(--ink);
  text-decoration: none;
  font-weight: 600;
  border: 1px solid transparent;
  border-radius: 12px;
  background: transparent;
  transition: all .18s ease;
}
.category-tabs .seg:hover {
  background: rgba(255,255,255,.06);
  border-color: rgba(255,255,255,.08);
  transform: translateY(-1px);
}
.category-tabs .seg.is-active {
  color: #fff;
  background: linear-gradient(135deg, var(--brand), #8e8aff);
  border-color: rgba(108,99,255,.55);
  box-shadow: 0 8px 22px rgba(108,99,255,.35);
}
.category-tabs .seg .bi {
  font-size: 14px;
  opacity: .9;
}

/* ===== Empty state inside table row ===== */
.table-products .empty-cell {
  padding: 0 16px !important;
}
.empty-state {
  margin: 10px 0;
  padding: 28px 20px;
  text-align: center;
  border: 1px dashed var(--line);
  background:
    radial-gradient(1200px 300px at 50% -80%, rgba(108,99,255,.12), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.04));
  border-radius: 14px;
  color: var(--ink);
}
.empty-state .icon {
  display: inline-grid;
  place-items: center;
  width: 44px;
  height: 44px;
  margin: 0 auto 8px;
  border-radius: 12px;
  background: rgba(108,99,255,.16);
  box-shadow: inset 0 0 0 1px rgba(108,99,255,.35);
}
.empty-state .icon .bi {
  font-size: 20px;
  color: #c8c6ff;
}
.empty-state .title {
  font-weight: 700;
  letter-spacing: .01em;
  margin: 6px 0 2px;
}
.empty-state .subtitle {
  color: var(--muted);
  margin-bottom: 14px;
}
.empty-state .actions {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}
.empty-state .btn-lite {
  padding: 6px 12px;
  border-radius: 10px;
  font-weight: 600;
  text-decoration: none;
  border: 1px solid var(--line);
  color: var(--ink);
  background: rgba(255,255,255,.03);
}
.empty-state .btn-lite:hover {
  background: rgba(255,255,255,.06);
}
